<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Undescore.jså’ŒjQueryçš„ç±»å‹åˆ¤æ–­ - Cirplan</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="cirplan"><meta name=description content="Undescore.jså’ŒjQueryçš„ç±»å‹åˆ¤æ–­"><meta name=keywords content="js,data type"><link rel=canonical href=https://cirplan.me/post/2016/02-19-js-date-type2/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link href=/sass/main.min.4325dd250c3d3e29d579a819f16fd876adbc5a03b3a1b32d2eefe0a067e8f219.css rel=stylesheet><meta property="og:title" content="Undescore.jså’ŒjQueryçš„ç±»å‹åˆ¤æ–­"><meta property="og:description" content="Undescore.jså’ŒjQueryçš„ç±»å‹åˆ¤æ–­"><meta property="og:type" content="article"><meta property="og:url" content="https://cirplan.me/post/2016/02-19-js-date-type2/"><meta property="article:section" content="post"><meta property="article:published_time" content="2016-02-19T22:09:43+08:00"><meta property="article:modified_time" content="2016-02-19T22:09:43+08:00"><meta itemprop=name content="Undescore.jså’ŒjQueryçš„ç±»å‹åˆ¤æ–­"><meta itemprop=description content="Undescore.jså’ŒjQueryçš„ç±»å‹åˆ¤æ–­"><meta itemprop=datePublished content="2016-02-19T22:09:43+08:00"><meta itemprop=dateModified content="2016-02-19T22:09:43+08:00"><meta itemprop=wordCount content="1516"><meta itemprop=keywords content="js,data type,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Undescore.jså’ŒjQueryçš„ç±»å‹åˆ¤æ–­"><meta name=twitter:description content="Undescore.jså’ŒjQueryçš„ç±»å‹åˆ¤æ–­"></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>Cirplan</a></div><div class=mobile-navbar-icon id=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>ä¸»é¡µ</li></a><a href=/post/><li class=mobile-menu-item>å½’æ¡£</li></a><a href=/tags/><li class=mobile-menu-item>æ ‡ç­¾</li></a><a href=/categories/><li class=mobile-menu-item>åˆ†ç±»</li></a><a href=/about/><li class=mobile-menu-item>å…³äº</li></a><a href=https://github.com/cirplan><li class=mobile-menu-item>Github</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>Cirplan</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>ä¸»é¡µ</a></li><li class=menu-item><a class=menu-item-link href=/post/>å½’æ¡£</a></li><li class=menu-item><a class=menu-item-link href=/tags/>æ ‡ç­¾</a></li><li class=menu-item><a class=menu-item-link href=/categories/>åˆ†ç±»</a></li><li class=menu-item><a class=menu-item-link href=/about/>å…³äº</a></li><li class=menu-item><a class=menu-item-link href=https://github.com/cirplan>Github</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>Undescore.jså’ŒjQueryçš„ç±»å‹åˆ¤æ–­</h1><div class=post-meta><span class=post-time>2016-02-19</span><div class=post-category><a href=/categories/js/>js</a></div><span class=more-meta>çº¦ 1516 å­—</span>
<span class=more-meta>é¢„è®¡é˜…è¯» 4 åˆ†é’Ÿ</span></div></header><div class=post-outdated><div class=warn><p>ã€æ³¨æ„ã€‘æœ€åæ›´æ–°äº <span class=timeago datetime=2016-02-19T22:09:43 title=2016-02-19>2016-02-19, </span>ï¼Œæ–‡ä¸­å†…å®¹å¯èƒ½å·²è¿‡æ—¶ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚</p></div></div><div class=post-content><p>è®°å¾—å¾ˆä¹…ä¹‹å‰ï¼Œæœ‰ç®€å•çš„è®°å½•è¿‡ js ä¸­çš„æ•°æ®ç±»å‹ï¼ˆ<a href=/post/2013/03-02-js-date-type/>ç‚¹è¿™é‡Œ</a>ï¼‰ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•å»åˆ¤æ–­ä¸€ä¸ªå˜é‡çš„æ•°æ®ç±»å‹å‘¢ï¼Ÿ</p><p>å…ˆæ¥çœ‹çœ‹ä¸€äº›åˆ¤æ–­ bug ï¼š</p><pre><code>typeof null // &quot;object&quot;
typeof new String('abc') // &quot;object&quot;

var iframeArr = new window.frames[0].Array;
iframeArr instanceof Array // false

isNaN('abc') // true
</code></pre><p>æ‰€ä»¥è¯´ï¼Œåœ¨åˆ¤æ–­ç±»å‹çš„æ—¶å€™ï¼Œå¾€å¾€ä¸å°å¿ƒå°±äº§ç”Ÿäº† bug . é‚£ä¹ˆï¼Œæ€æ ·æ‰èƒ½å‡†ç¡®åˆ¤æ–­æ•°æ®ç±»å‹ï¼Ÿæ¥çœ‹çœ‹ <code>undescore.js</code> å’Œ <code>jQuery</code> çš„åšæ³•ã€‚</p><h2 id=1-underscore-183>1. underscore 1.8.3</h2><p>underscore æä¾›äº†ä¸€å †åˆ¤æ–­ç±»å‹çš„å‡½æ•°ï¼Œå¦‚ä¸‹ï¼š</p><pre><code>- isArray
- isObject
- isArguments
- isFunction
- isString
- isNumber
- isFinite
- isBoolean
- isDate
- isRegExp
- isNaN
- isNull
- isUndefined
</code></pre><p>å…¶æ ¸å¿ƒçš„åˆ¤æ–­ä»£ç å¦‚ä¸‹ï¼Œåˆ©ç”¨ <code>Object.prototype.toSting</code>ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ä¸šç•Œå…¬è®¤å¥½ç”¨çš„æ–¹æ³•ï¼š</p><pre><code>// Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.
_.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {
    _['is' + name] = function(obj) {
        return toString.call(obj) === '[object ' + name + ']';
    };
});
</code></pre><p>ä¸‹é¢çœ‹çœ‹å…¶ä»–åˆ¤æ–­å‡½æ•°ã€‚</p><h3 id=--isarray>- isArray</h3><p>å…ˆåˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒåŸç”ŸES5çš„ <code>Array.isArray</code> æ–¹æ³•ï¼Œæ”¯æŒåˆ™ç›´æ¥ç”¨åŸç”Ÿæ–¹æ³•åˆ¤æ–­ï¼Œä¸ç„¶åˆ©ç”¨ <code>Object.prototype.toSting</code> æ¥åˆ¤æ–­ã€‚</p><pre><code>var ObjProto = Object.prototype,
    toString = ObjProto.toString,
    nativeIsArray = Array.isArray;

_.isArray = nativeIsArray || function(obj) {
    return toString.call(obj) === '[object Array]';
  };
</code></pre><h3 id=--isobject>- isObject</h3><p>ç›´æ¥ç”¨ typeof åˆ¤æ–­ã€‚ä¸è¿‡åˆ¤æ–­å‡½æ•°çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯ <code>true</code> ? è¿™æ ·å²‚ä¸æ˜¯ä¼šå’Œ <code>isFunction</code> æœ‰é‡å ï¼Ÿ</p><pre><code>_.isObject = function(obj) {
    var type = typeof obj;
    return type === 'function' || type === 'object' &amp;&amp; !!obj;
};

// example
function a () {}
console.log(_.isObject(a)); // true
</code></pre><h3 id=--isarguments-ä½äºie9-ç‰ˆæœ¬>- isArguments <code>ä½äºIE9 ç‰ˆæœ¬</code></h3><p>ç›´æ¥åˆ¤æ–­æ˜¯å¦æœ‰ <code>callee</code> å±æ€§ã€‚è¦æ³¨æ„çš„æ˜¯ï¼šåœ¨ ES5 æ ‡å‡†ä¸­ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•°å‚æ•°æ˜¯æ²¡æœ‰ <code>callee</code> å±æ€§çš„ï¼Œè¯¦ç»†çœ‹<a href=http://stackoverflow.com/questions/103598/why-was-the-arguments-callee-caller-property-deprecated-in-javascript/235760#235760>è¿™é‡Œ</a>ã€‚</p><pre><code>_.has = function(obj, key) {
    return obj != null &amp;&amp; hasOwnProperty.call(obj, key);
};

// åœ¨ IE &lt; 9 æ˜¯æ²¡æœ‰ [object Arguments] è¿™ä¸ªç±»å‹çš„
if (!_.isArguments(arguments)) {
    _.isArguments = function(obj) {
        return _.has(obj, 'callee');
    };
}
</code></pre><h3 id=--isfunction-ä¼˜åŒ–ç‰ˆæœ¬>- isFunction <code>ä¼˜åŒ–ç‰ˆæœ¬</code></h3><p>è¿™é‡Œä¼šæœ‰ç–‘é—®ï¼Œæ˜æ˜ç›´æ¥ç”¨ typeof åˆ¤æ–­å°±å¯ä»¥äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦åŠ åé¢çš„ <code>|| false</code>ï¼Ÿæ³¨é‡Šé‡Œè¯´æ˜¯å› ä¸º IE11 (& IE8) ä¸‹é¢çš„ bugã€‚è¯¦æƒ…çœ‹<a href=https://github.com/jashkenas/underscore/issues/1621>è¿™é‡Œ</a>ã€‚</p><pre><code>// Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,
// IE 11 (#1621), and in Safari 8 (#1929).
if (typeof /./ != 'function' &amp;&amp; typeof Int8Array != 'object') {
    _.isFunction = function(obj) {
        return typeof obj == 'function' || false;
    };
}
</code></pre><h3 id=--isfinite>- isFinite</h3><p>åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦ä¸ºæœ‰é™ï¼Œå…ˆçœ‹åŸºæœ¬çš„æµ‹è¯•ï¼š</p><pre><code>isFinite(Infinity);  // false
isFinite(NaN);       // false
isFinite(-Infinity); // false

isFinite(0);         // true
isFinite(2e64);      // true
isFinite(null);      // true

isFinite(&quot;0&quot;);       // true
</code></pre><p>å†çœ‹ underscore.js ä¸­çš„ä»£ç ï¼Œæ’é™¤äº† NaN æƒ…å†µï¼š</p><pre><code>_.isFinite = function(obj) {
    return isFinite(obj) &amp;&amp; !isNaN(parseFloat(obj));
};
</code></pre><h3 id=--isnan---isboolean---isnull---isundefined>- isNaN, - isBoolean, - isNull, - isUndefined</h3><p>å…¶ä»–ç±»å‹åˆ¤æ–­å‡½æ•°æ²¡ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œå¦‚ä¸‹ã€‚</p><pre><code>// Is the given value `NaN`? (NaN is the only number which does not equal itself).
_.isNaN = function(obj) {
    return _.isNumber(obj) &amp;&amp; obj !== +obj;
};

// Is a given value a boolean?
_.isBoolean = function(obj) {
    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';
};

// Is a given value equal to null?
_.isNull = function(obj) {
    return obj === null;
};

// Is a given variable undefined?
_.isUndefined = function(obj) {
    return obj === void 0;
};
</code></pre><h2 id=2-jquery-1112>2. jQuery 1.11.2</h2><p>çœ‹çœ‹ jQuery ä¸­å°è£…çš„ç±»å‹åˆ¤æ–­æ¥å£ï¼š</p><pre><code>$.type(obj)
$.isArray(obj)
$.isFunction(obj)
$.isEmptyObject(obj)
$.isPlainObject(obj)
$.isWindow(obj)
$.isNumeric(value)
</code></pre><p>å…¶æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼Œä¹Ÿæ˜¯é‡‡ç”¨ <code>Object.prototype.toSting</code> ï¼š</p><pre><code>var class2type = {};

var toString = class2type.toString;

...

jQuery.each(&quot;Boolean Number String Function Array Date RegExp Object Error&quot;.split(&quot; &quot;), function(i, name) {
    class2type[ &quot;[object &quot; + name + &quot;]&quot; ] = name.toLowerCase();
});

...

type: function( obj ) {
    if ( obj == null ) {
        return obj + &quot;&quot;;
    }
    return typeof obj === &quot;object&quot; || typeof obj === &quot;function&quot; ?
        class2type[ toString.call(obj) ] || &quot;object&quot; :
        typeof obj;
},
</code></pre><p>å…¶ä¸­ <code>isArray</code> å’Œ <code>isFunction</code> æ˜¯å¯¹ <code>type</code> å‡½æ•°çš„è¿›ä¸€æ­¥å°è£…ã€‚</p><pre><code>isFunction: function( obj ) {
    return jQuery.type(obj) === &quot;function&quot;;
},

isArray: Array.isArray || function( obj ) {
    return jQuery.type(obj) === &quot;array&quot;;
},
</code></pre><p>ä¸‹é¢ç»§ç»­çœ‹çœ‹å…¶ä»–å‡½æ•°ã€‚</p><h3 id=--isemptyobject>- isEmptyObject</h3><p>åˆ¤æ–­æ˜¯å¦ä¸ºç©ºå¯¹è±¡ã€‚</p><pre><code>isEmptyObject: function( obj ) {
    var name;
    for ( name in obj ) {
        return false;
    }
    return true;
},
</code></pre><h3 id=--isplainobject>- isPlainObject</h3><p>è¿™æ˜¯ jQuery ä¸­ç‰¹æœ‰çš„æ–¹æ³•ï¼Œåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºçº¯ç²¹å¯¹è±¡ï¼ˆé€šè¿‡ {} æˆ– new Object() åˆ›å»ºçš„ï¼‰ã€‚</p><pre><code>var hasOwn = class2type.hasOwnProperty;

...

isPlainObject: function( obj ) {
    var key;

    // ä¸èƒ½è¢«è½¬ä¸ºtrue, 
    // ç±»å‹ä¸€å®šè¦æ˜¯[object Object]
    // è¿‡æ»¤ Dom èŠ‚ç‚¹å’Œ window å¯¹è±¡
    if ( !obj || jQuery.type(obj) !== &quot;object&quot; || obj.nodeType || jQuery.isWindow( obj ) ) {
        return false;
    }

    try {
        // æ²¡æœ‰è‡ªå·±çš„ constructor å±æ€§çš„ä¸€å®šä¸º Object
        if ( obj.constructor &amp;&amp;
            !hasOwn.call(obj, &quot;constructor&quot;) &amp;&amp;
            !hasOwn.call(obj.constructor.prototype, &quot;isPrototypeOf&quot;) ) {
            return false;
        }
    } catch ( e ) {
        // IE8,9æ‰§è¡Œä¸Šé¢æ“ä½œçš„æ—¶å€™ï¼Œä¼šæŠ¥é”™ï¼Œä¹Ÿè¿”å› false
        return false;
    }

    // Support: IE&lt;9
    // Handle iteration over inherited properties before own properties.
    if ( support.ownLast ) {
        for ( key in obj ) {
            return hasOwn.call( obj, key );
        }
    }

    // åœ¨æšä¸¾å±æ€§çš„æ—¶å€™ï¼Œè‡ªèº«çš„å±æ€§ä¼šå…ˆè¢«æšä¸¾ï¼Œç„¶åå†æšä¸¾ç»§æ‰¿çš„å±æ€§ï¼Œå¦‚æœæšä¸¾çš„æœ€åä¸€ä¸ªå±æ€§ä¸ºè‡ªèº«çš„ï¼Œåˆ™ä¸º true
    for ( key in obj ) {}

    return key === undefined || hasOwn.call( obj, key );
},
</code></pre><h3 id=--iswindow>- isWindow</h3><p>åˆ¤æ–­æ˜¯å¦ä¸º window å¯¹è±¡ã€‚åˆ©ç”¨ window = window.window çš„å±æ€§ã€‚</p><pre><code>isWindow: function( obj ) {
    return obj != null &amp;&amp; obj == obj.window;
},
</code></pre><h3 id=--isnumeric>- isNumeric</h3><p>åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—ã€‚</p><pre><code>isNumeric: function( obj ) {
    // parseFloat NaNs numeric-cast false positives (null|true|false|&quot;&quot;)
    // ...but misinterprets leading-number strings, particularly hex literals (&quot;0x...&quot;)
    // subtraction forces infinities to NaN
    // adding 1 corrects loss of precision from parseFloat (#15100)
    return !jQuery.isArray( obj ) &amp;&amp; (obj - parseFloat( obj ) + 1) &gt;= 0;
}
</code></pre><h2 id=æ€»ç»“>æ€»ç»“</h2><p>js åœ¨åˆ¤æ–­ç±»å‹çš„é“è·¯ä¸Šï¼Œæ›¾ç»æœ‰å¾ˆå¤šçš„å°è¯•ï¼Œæ¯ä¸ªç±»åº“çš„åˆ¤æ–­æ–¹å¼éƒ½ä¸åŒï¼Œä½†è‡ªä» <code>Object.prototype.toSting</code> è¢«æŒ–æ˜å‡ºæ¥åï¼Œ
å·²ç»å˜æˆäº†å…¬è®¤çš„åˆ¤æ–­ç±»å‹æ–¹æ³•ã€‚</p><p>æŠŠ jQuery ä¸­çš„ <code>type</code> æ–¹æ³•æŠ½å‡ºæ¥å¦‚ä¸‹ï¼š</p><pre><code>var typeObj = {} ;
&quot;Boolean Number String Function Array Date RegExp Object Error&quot;.split(&quot; &quot;).forEach( function (e, i) {
    typeObj[ &quot;[object &quot; + e + &quot;]&quot; ] = e.toLowerCase();
});

function _typeof (obj) {
    if ( obj == null ) {
        return String( obj );
    }
    return typeof obj === &quot;object&quot; || typeof obj === &quot;function&quot; ?
        typeObj[ typeObj.toString.call(obj) ] || &quot;object&quot; :
        typeof obj;
}
</code></pre><p>è¿™æ ·ï¼Œåœ¨åˆ¤æ–­ç±»å‹çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥ç”¨è¿™æ®µä»£ç äº†ã€‚</p><h3 id=å»¶ä¼¸é˜…è¯»>å»¶ä¼¸é˜…è¯»</h3><ul><li><a href=https://github.com/lifesinger/blog/issues/175>Sea.js æºç è§£æï¼ˆä¸‰ï¼‰</a></li></ul></div><div class=post-copyright><p class=copyright-item><span class=item-title>æ–‡ç« ä½œè€…</span>
<span class=item-content>cirplan</span></p><p class=copyright-item><span class=item-title>ä¸Šæ¬¡æ›´æ–°</span>
<span class=item-content>2016-02-19</span></p><p class=copyright-item><span class=item-title>æ–‡ç« é“¾æ¥</span>
<span class=item-content>https://cirplan.me/post/2016/02-19-js-date-type2/</span></p><p class=copyright-item><span class=item-title>è®¸å¯åè®®</span>
<span class=item-content><a rel="license noopener" href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank>ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… (CC BY-NC-SA 4.0)</a></span></p></div><footer class=post-footer><div class=post-tags><a href=/tags/js/>js</a>
<a href=/tags/data-type/>data type</a></div><nav class=post-nav><a class=prev href=/post/2017/03-13-wx-platform-conect/><i class="iconfont icon-left"></i>
<span class="prev-text nav-default">ä½¿ç”¨koa2å¯¹æ¥å¾®ä¿¡å…¬ä¼—å¹³å°</span>
<span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span></a>
<a class=next href=/post/2016/02-01-year-summary/><span class="next-text nav-default">æˆ‘çš„2015</span>
<span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div></div></main><footer id=footer class=footer><div class=copyright><span class=copyright-year>&copy;
2013 -
2022<span class=heart>ğŸ¥•</span><span>cirplan</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script>window.onload=function(){const e="fixed-open",n="slideout-open",s="icon-click",t=document.querySelector("#mobile-navbar-icon");t.addEventListener("click",o=>{const i=document.querySelector("#mobile-navbar"),a=document.querySelector("#mobile-panel");i.classList.contains(e)?(i.classList.remove(e),a.classList.remove(e),t.classList.remove(s),document.documentElement.classList.remove(n)):(i.classList.add(e),a.classList.add(e),t.classList.add(s),document.documentElement.classList.add(n))})}</script></body></html>